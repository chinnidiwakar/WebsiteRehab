<!DOCTYPE html>
<html lang="en">
  <head>

    <!-- Plausible Analytics -->
    <script>
      (function (w,d,s,o,f,js,fjs) {
      w[o] = w[o] || function () { (w[o].q = w[o].q || []).push(arguments) };
      js = d.createElement(s), fjs = d.getElementsByTagName(s)[0];
      js.id = o; js.src = f; js.async = 1; fjs.parentNode.insertBefore(js, fjs);
      }(window, document, 'script', 'plausible', 'https://plausible.io/js/p.js'));
      plausible('page')
    </script>

  <title>ShellDredd #1 Hannah Walkthrough</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,shrink-to-fit=no" />
  <link rel="stylesheet" media="screen" href="../../css/screen.css" />
  </head>
  <header class = "header">
    <nav>
      <ul>
        <li><a href="../../about/index.html">About</a></li>
        <li><a href="../../resume/index.html">Resume</a></li>
        <li><a href="../../work/index.html">Work</a></li>
        <li><a href="../../contact/index.html">Contact</a></li>
      </ul>
    </nav>
  </header>
    <body class = "bpt1">
    <h1>ShellDredd #1 Hannah Walkthrough</h1>
    <h2>Updated On: 09/05/2020 </h2>
    <p> This is another VulnHub walkthrough <a href="https://www.vulnhub.com/entry/onsystem-shelldredd-1-hannah,545/">and you can download it here.</a></p>

    <h3>Initial Scan</h3>
    <img src="hannah_ss/nmap.png" alt="nmap scan">
    <p>The scan results showed port 21 open with FTP (with anonymous login) and port 61000 open with ssh.</p>
    <h3> Port 21 - FTP</h3>
    <p>After logging in as the anonymous user, I couldn't find anything with a simple ls command, but ls -la showed a directory called ".hannah" that looked interesting.</p>
    <img src="hannah_ss/ftp_listing.png" alt="ftp listing">
    <p>I found out that you can do a wget command to download everything off of an FTP server. <a href="https://book.hacktricks.xyz/pentesting/pentesting-ftp">Source website here</a></p>
    <pre><code class="bash">wget -m ftp://anonymous:anonymous@ip_of_machine</code></pre>
    <p> With that, we find out that ".hannah" has her private ssh key. Bingo!</p>
    <img src="hannah_ss/hannah_key.png" alt="hannah private key">

    <h3> Port 22 - SSH</h3>
    <p>We can use the private key we found to login to the machine. Make sure you change the permissions of the file first, or else you'll get an error like I did in my screenshot below. The user flag is located in Hannah's folder.</p>
    <img src="hannah_ss/hannah_ssh.png" alt="ssh login">

    <h3> Privilege Escalation</h3>
    <p>I like to check SUID because that's a low hanging fruit. You can check this with the command below:</p>
    <pre><code class="bash">find / perm -u=s -type f 2>/dev/null</code></pre>
    <p>Pardon the below screenshot being ran as root, I forgot to take this until after I gained access to the machine. I highlighted "/usr/bin/mawk" because that was the one I used to gain access to the machine.</p>
    <img src="hannah_ss/suid_options.png" alt="SUID options">
    <p>I used GTFObins as a reference for this <a href="https://gtfobins.github.io/gtfobins/mawk/#limited-suid">and linked it here.</a> </p>
    <img src="hannah_ss/root_flag.png" alt="root flag">
    <p>To explain, I used <a href=""> this website as a reference</a> and the command listed in GTFObins to edit the /etc/shadow file and get root access to the machine. Easy peasy!</p>

    <h4><a href="../../work/pentesting/index.html">Check out my other pen testing walkthroughs here</a></h4>
    </body>
    <footer class = "mFooter">
      <p>Copyright Â© Akvile Kiskis. All rights reserved.</p>
    </footer>
</html>
