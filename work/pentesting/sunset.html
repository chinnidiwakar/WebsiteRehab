<!DOCTYPE html>
<html lang="en">
  <head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-132576850-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-132576850-1');
  </script>
  <title>Sunset Walkthrough</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0,shrink-to-fit=no" />
  <link rel="stylesheet" media="screen" href="../../css/screen.css" />
  </head>
  <header class = "header">
    <nav>
      <ul>
        <li><a href="../../about/index.html">About</a></li>
        <li><a href="../../resume/index.html">Resume</a></li>
        <li><a href="../../work/index.html">Work</a></li>
        <li><a href="../../contact/index.html">Contact</a></li>
      </ul>
    </nav>
  </header>
    <body class = "bulldog">
    <h1>Sunset Walkthrough</h1>
    <h2>Updated On: 08/04/2019 </h2>
    <p> Haven't had time to do one in a while and saw this was the newest on on VulnHub with no description, which means it's either really easy or really difficult (it was the former).
    <a href="https://www.vulnhub.com/entry/sunset-1,339/">Download link is here.</a></p>
    <h3> Initial Scan </h3>
    <p>The nmap scan showed that ports 21 and 22 are open, with anonymous login allowed on FTP (nice).</p>
    <img src="sunsetss/nmap.png" alt="nmap scan">
    <h3> Port 21 - FTP </h3>
    <p>I saw the same misconfiguration on a HTB machine, so this was familiar territory. </p>
    <img src="sunsetss/ftp_login.png" alt="FTP Login">
    <p> The only difference is this time I logged in as "anonymous" instead of "ftp".</p>
    <img src="sunsetss/transfer.png" alt="transfer">
    <p>There was a file called "backup" on the server which I transferred to my Kali VM.</p>
    <img src="sunsetss/creds.png" alt="creds">
    <p>Looks like there are some credentials in this file. Normally, I'd use John the Ripper for this. However, after an annoying CTF experience where John
    wasn't working properly to give me the flag, I've renounced it for hashcat. The command I used to crack the credentials is below:</p>
    <pre><code class="bash">hashcat -m 1800 -a 0 -o cracked.txt --remove hashes rockyou.txt</code></pre>
    <p>To break it down:</p>
    <p>-m 1800 --> SHA512 Unix hashes</p>
    <p>-a 0 --> dictionary attack (hence me using "rockyou.txt")</p>
    <p>-o cracked.txt --remove hashes --> output the cracked hashes into the "cracked.txt" file and remove the hashes from my "hashes" file as they
      get cracked</p>
    <img src="sunsetss/results.png" alt="results">
    <p>It looks like we got 3/5 of the hashes, but I'm skeptical that two of the username:password combinations are where the username and password have been the same.
    If I spell out the three user:password combos, they are:</p>
    <p>1. sunset:cheer14</p>
    <p>2. sky:sky</p>
    <p>3. space:space</p>
    <p>I'm still skeptical about the last two, so I tried using the sunset one first.</p>
    <h3> Port 22 - SSH </h3>
    <p> All that was left was to try our newly found credentials to ssh into the machine.</p>
    <img src="sunsetss/user_flag.png" alt="user flag">
    <p>Looks like it's HTB style with a user flag and root flag, so we're 50% of the way there.
    One way to look for privilege escalation is by using the "sudo -l" command, which lists what the current
    user can execute as root.</p>
    <img src="sunsetss/root_flag.png" alt="root flag">
    <p>The command revealed that I could execute "/usr/bin/ed" and I used the shell escape command to allow me to execute normal commands.
      That led me to the root flag, which was straightforward to find. This is a perfect box to dust off some pen testing rust and go back to the basics.</p>
    <h4><a href="../../work/pentesting/index.html">Check out my other pen testing walkthroughs here</a></h4>
    </body>
  <footer class = "mFooter">
    <p>Copyright Â© Akvile Kiskis. All rights reserved.</p>
  </footer>
</html>
